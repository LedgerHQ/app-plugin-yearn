import "core-js/stable";
import "regenerator-runtime/runtime";
import { waitForAppScreen, zemu } from './test.fixture';

const BASE_SCREENS_S = (1 + 1 + 1 + 3 + 1) //YEARN + AMOUNT + VAULT + GAS_FEES + APPROVE
const BASE_SCREENS_X = (1 + 1 + 1 + 1 + 1) //YEARN + AMOUNT + VAULT + GAS_FEES + APPROVE

test('[Nano S] Zap In Eth', zemu("nanos", async (sim, eth) => {
  // Original TX: https://etherscan.io/tx/0x3ab4f04f4fc05f5c533aa94a558280e3527adaac308d52f52dc48e2751b120fa
  eth.signTransaction(
    "44'/60'/0'/0/0",
    "02f909f30181cd8459682f0085047b9e6984830d9c7894c2c171bd6fc3b5885b589ed8b4d135f31085e97380b90984b6c2c6e9000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000238ea6aaa9730cdaa4000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000016825039dfe2a5b01f3e1e6a2bbf9a576c6f95c40000000000000000000000000000000000000000000000271c1315a7325a9581000000000000000000000000a6f222a2ea6a1cfafa48ff0014ee4fe277580aa00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff52000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd20000000000000000000000000000000000000000000000000000000000000824e6baeb7a000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000237357d4a55b68b832000000000000000000000000853d955acef822db058eb8505911ed77f175b99e000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc89000000000000000000000000000000000000000000000027c6c6e4d84d8431ff000000000000000000000000def1c0ded9bec7f1a1670819833240f027b25eff0000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff5200000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000000000000000000000000000000000000628415565b0000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000273bd8a67912144f2d00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e0000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000034000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99e00000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000002c0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000237357d4a55b68b8320000000000000000000000000000000000000000000000273bd8a67912144f2d000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002bc2544a32872a91f4a553b404c6950e89de901fdb002710853d955acef822db058eb8505911ed77f175b99e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd2000000000000000000000000000000000000000000000098f2284d9d63742af00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a077cb092f09f02acd20679c18c946886cfcbd69efb27acb14fdab59b7dd0ec7d4a079e235ead025d9039047cfeec0e554e68ec66a514b15d056a88d54222ae2e673"
  );

  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanos_zapin_eth_weth', [BASE_SCREENS_S, 0]);
}));



test('[Nano X] Zap In Eth', zemu("nanox", async (sim, eth) => {
  // Original TX: https://etherscan.io/tx/0x3ab4f04f4fc05f5c533aa94a558280e3527adaac308d52f52dc48e2751b120fa
  eth.signTransaction(
    "44'/60'/0'/0/0",
    "02f909f30181cd8459682f0085047b9e6984830d9c7894c2c171bd6fc3b5885b589ed8b4d135f31085e97380b90984b6c2c6e9000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000238ea6aaa9730cdaa4000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000016825039dfe2a5b01f3e1e6a2bbf9a576c6f95c40000000000000000000000000000000000000000000000271c1315a7325a9581000000000000000000000000a6f222a2ea6a1cfafa48ff0014ee4fe277580aa00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff52000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd20000000000000000000000000000000000000000000000000000000000000824e6baeb7a000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000237357d4a55b68b832000000000000000000000000853d955acef822db058eb8505911ed77f175b99e000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc89000000000000000000000000000000000000000000000027c6c6e4d84d8431ff000000000000000000000000def1c0ded9bec7f1a1670819833240f027b25eff0000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff5200000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000000000000000000000000000000000000628415565b0000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000273bd8a67912144f2d00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e0000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000034000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99e00000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000002c0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000237357d4a55b68b8320000000000000000000000000000000000000000000000273bd8a67912144f2d000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002bc2544a32872a91f4a553b404c6950e89de901fdb002710853d955acef822db058eb8505911ed77f175b99e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd2000000000000000000000000000000000000000000000098f2284d9d63742af00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a077cb092f09f02acd20679c18c946886cfcbd69efb27acb14fdab59b7dd0ec7d4a079e235ead025d9039047cfeec0e554e68ec66a514b15d056a88d54222ae2e673"
  );

  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanox_zapin_eth_weth', [BASE_SCREENS_X, 0]);
}));


test('[Nano SP] Zap In Eth', zemu("nanosp", async (sim, eth) => {
  // Original TX: https://etherscan.io/tx/0x3ab4f04f4fc05f5c533aa94a558280e3527adaac308d52f52dc48e2751b120fa
  eth.signTransaction(
    "44'/60'/0'/0/0",
    "02f909f30181cd8459682f0085047b9e6984830d9c7894c2c171bd6fc3b5885b589ed8b4d135f31085e97380b90984b6c2c6e9000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000238ea6aaa9730cdaa4000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000016825039dfe2a5b01f3e1e6a2bbf9a576c6f95c40000000000000000000000000000000000000000000000271c1315a7325a9581000000000000000000000000a6f222a2ea6a1cfafa48ff0014ee4fe277580aa00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff52000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd20000000000000000000000000000000000000000000000000000000000000824e6baeb7a000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb0000000000000000000000000000000000000000000000237357d4a55b68b832000000000000000000000000853d955acef822db058eb8505911ed77f175b99e000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc89000000000000000000000000000000000000000000000027c6c6e4d84d8431ff000000000000000000000000def1c0ded9bec7f1a1670819833240f027b25eff0000000000000000000000000000000000000000000000000000000000000120000000000000000000000000feb4acf3df3cdea7399794d0869ef76a6efaff5200000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000000000000000000000000000000000000628415565b0000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000273bd8a67912144f2d00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e0000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000034000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000853d955acef822db058eb8505911ed77f175b99e00000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000002c0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000237357d4a55b68b8320000000000000000000000000000000000000000000000273bd8a67912144f2d000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002bc2544a32872a91f4a553b404c6950e89de901fdb002710853d955acef822db058eb8505911ed77f175b99e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c2544a32872a91f4a553b404c6950e89de901fdb000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd000000000000000000000000fbd4c3d8be6b15b7cf428db2838bb44c0054fcd2000000000000000000000000000000000000000000000098f2284d9d63742af00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000baaa1f5dba42c3389bdbc2c9d2de134f5cd0dc8900000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c080a077cb092f09f02acd20679c18c946886cfcbd69efb27acb14fdab59b7dd0ec7d4a079e235ead025d9039047cfeec0e554e68ec66a514b15d056a88d54222ae2e673"
  );

  await waitForAppScreen(sim);
  await sim.navigateAndCompareSnapshots('.', 'nanox_zapin_eth_weth', [BASE_SCREENS_X, 0]);
}));
